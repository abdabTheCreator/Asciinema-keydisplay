  <!DOCTYPE html>
  <html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="asciinema-player.css" />
        <!-- Place favicon.ico in the root directory -->
      </head>

  <style>

    #emacs{
        position: absolute;
        top:50%;
        left:50%;
        transform: translate(-50%,-50%);
    }
    p{
        background-color: rgba(0, 0, 0, 0.432);
        color:white;
        height:100px;
        width:300px;
        font-size: 40px;
        position: absolute;
        z-index: 2;
        right:50px;
        bottom:5px;
    }
  </style>
  <body>
    
    <div id="center-items">

        <div style ="width:50%; height:50%;"id="emacs">
            <p id="keystroke">#</p>

        </div>
    </div>


  </body>

  <script src="asciinema-player.min.js"></script>
  <script src="keymap.js"></script>

  <script>
    var p = document.getElementById('keystroke')
    const hextodec = (hexnum) => parseInt(hexnum, 16);

    AsciinemaPlayer.create({
      
        url: 'chars2.cast',
        autoPlay: true,
        preload: true,
        loop: true,
        theme: 'solarized-dark',
        poster: "data:text/plain,I'm regular \x1b[1;32mI'm bold green\x1b[3BI'm 3 lines down"
    }, document.getElementById('emacs')).addEventListener('input', ({data}) => {
          //remove the escaped unicode chars \u
          //parse the remaing hex code into a decimal e.g. 001b = 27 
          // find corelating key e.g. 27 = escape
          let sjson = JSON.stringify(data[0])

          if(sjson.includes("u")){
            string = JSON.stringify(data[0]).replace("\\u", "").trim()
            let keyCode = hextodec(JSON.parse(string))
            p.innerText = keyboardMap[keyCode]
          }else{
            p.innerText = sjson
          }

    });
   

    </script>
  </html>
